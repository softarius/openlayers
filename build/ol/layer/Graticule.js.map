{"version":3,"file":"Graticule.js","sources":["../../../src/ol/layer/Graticule.js"],"sourcesContent":["/**\r\n * @module ol/layer/Graticule\r\n */\r\nimport VectorLayer from './Vector.js';\r\nimport {assign} from '../obj.js';\r\nimport {degreesToStringHDMS} from '../coordinate';\r\nimport Text from '../style/Text';\r\nimport Fill from '../style/Fill';\r\nimport Stroke from '../style/Stroke';\r\nimport LineString from '../geom/LineString.js';\r\nimport VectorSource from '../source/Vector';\r\nimport {\r\n  equivalent as equivalentProjection,\r\n  get as getProjection,\r\n  getTransform,\r\n  transformExtent\r\n} from '../proj';\r\nimport {getCenter, intersects, equals, getIntersection, isEmpty} from '../extent';\r\nimport {clamp} from '../math';\r\nimport Style from '../style/Style';\r\nimport Feature from '../Feature';\r\nimport {bbox} from '../loadingstrategy';\r\nimport {meridian, parallel} from '../geom/flat/geodesic';\r\nimport GeometryLayout from '../geom/GeometryLayout';\r\nimport Point from '../geom/Point';\r\nimport Collection from '../Collection';\r\n\r\n\r\n/**\r\n * @type {Stroke}\r\n * @private\r\n * @const\r\n */\r\nconst DEFAULT_STROKE_STYLE = new Stroke({\r\n  color: 'rgba(0,0,0,0.2)'\r\n});\r\n\r\n/**\r\n * @type {Array<number>}\r\n * @private\r\n */\r\nconst INTERVALS = [\r\n  90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001\r\n];\r\n\r\n/**\r\n * @typedef {Object} GraticuleLabelDataType\r\n * @property {Point} geom\r\n * @property {string} text\r\n */\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {number} [opacity=1] Opacity (0, 1).\r\n * @property {boolean} [visible=true] Visibility.\r\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\r\n * rendered outside of this extent.\r\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\r\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\r\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\r\n * method was used.\r\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\r\n * visible.\r\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\r\n * be visible.\r\n * @property {number} [maxLines=100] The maximum number of meridians and\r\n * parallels from the center of the map. The default value of 100 means that at\r\n * most 200 meridians and 200 parallels will be displayed. The default value is\r\n * appropriate for conformal projections like Spherical Mercator. If you\r\n * increase the value, more lines will be drawn and the drawing performance will\r\n * decrease.\r\n * @property {Stroke} [strokeStyle='rgba(0,0,0,0.2)'] The\r\n * stroke style to use for drawing the graticule. If not provided, a not fully\r\n * opaque black will be used.\r\n * @property {number} [targetSize=100] The target size of the graticule cells,\r\n * in pixels.\r\n * @property {boolean} [showLabels=false] Render a label with the respective\r\n * latitude/longitude for each graticule line.\r\n * @property {function(number):string} [lonLabelFormatter] Label formatter for\r\n * longitudes. This function is called with the longitude as argument, and\r\n * should return a formatted string representing the longitude. By default,\r\n * labels are formatted as degrees, minutes, seconds and hemisphere.\r\n * @property {function(number):string} [latLabelFormatter] Label formatter for\r\n * latitudes. This function is called with the latitude as argument, and\r\n * should return a formatted string representing the latitude. By default,\r\n * labels are formatted as degrees, minutes, seconds and hemisphere.\r\n * @property {number} [lonLabelPosition=0] Longitude label position in fractions\r\n * (0..1) of view extent. 0 means at the bottom of the viewport, 1 means at the\r\n * top.\r\n * @property {number} [latLabelPosition=1] Latitude label position in fractions\r\n * (0..1) of view extent. 0 means at the left of the viewport, 1 means at the\r\n * right.\r\n * @property {Text} [lonLabelStyle] Longitude label text\r\n * style. If not provided, the following style will be used:\r\n * ```js\r\n * new Text({\r\n *   font: '12px Calibri,sans-serif',\r\n *   textBaseline: 'bottom',\r\n *   fill: new Fill({\r\n *     color: 'rgba(0,0,0,1)'\r\n *   }),\r\n *   stroke: new Stroke({\r\n *     color: 'rgba(255,255,255,1)',\r\n *     width: 3\r\n *   })\r\n * });\r\n * ```\r\n * Note that the default's `textBaseline` configuration will not work well for\r\n * `lonLabelPosition` configurations that position labels close to the top of\r\n * the viewport.\r\n * @property {Text} [latLabelStyle] Latitude label text style.\r\n * If not provided, the following style will be used:\r\n * ```js\r\n * new Text({\r\n *   font: '12px Calibri,sans-serif',\r\n *   textAlign: 'end',\r\n *   fill: new Fill({\r\n *     color: 'rgba(0,0,0,1)'\r\n *   }),\r\n *   stroke: Stroke({\r\n *     color: 'rgba(255,255,255,1)',\r\n *     width: 3\r\n *   })\r\n * });\r\n * ```\r\n * Note that the default's `textAlign` configuration will not work well for\r\n * `latLabelPosition` configurations that position labels close to the left of\r\n * the viewport.\r\n * @property {Array<number>} [intervals=[90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001]]\r\n * Intervals (in degrees) for the graticule. Example to limit graticules to 30 and 10 degrees intervals:\r\n * ```js\r\n * [30, 10]\r\n * ```\r\n * @property {boolean} [wrapX=true] Whether to repeat the graticule horizontally.\r\n */\r\n\r\n\r\n/**\r\n * @classdesc\r\n * Layer that renders a grid for a coordinate system.\r\n *\r\n * @fires import(\"../render/Event.js\").RenderEvent\r\n * @api\r\n */\r\nclass Graticule extends VectorLayer {\r\n  /**\r\n   * @param {Options=} opt_options Options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options ? opt_options : {};\r\n\r\n    const baseOptions = assign({}, options);\r\n\r\n    delete baseOptions.maxLines;\r\n    delete baseOptions.strokeStyle;\r\n    delete baseOptions.targetSize;\r\n    delete baseOptions.showLabels;\r\n    delete baseOptions.lonLabelFormatter;\r\n    delete baseOptions.latLabelFormatter;\r\n    delete baseOptions.lonLabelPosition;\r\n    delete baseOptions.latLabelPosition;\r\n    delete baseOptions.lonLabelStyle;\r\n    delete baseOptions.latLabelStyle;\r\n    delete baseOptions.intervals;\r\n    super(baseOptions);\r\n\r\n    /**\r\n     * @type {import(\"../proj/Projection.js\").default}\r\n     */\r\n    this.projection_ = null;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.maxLat_ = Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.maxLon_ = Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.minLat_ = -Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.minLon_ = -Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.maxLatP_ = Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.maxLonP_ = Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.minLatP_ = -Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.minLonP_ = -Infinity;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.targetSize_ = options.targetSize !== undefined ? options.targetSize : 100;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.maxLines_ = options.maxLines !== undefined ? options.maxLines : 100;\r\n\r\n    /**\r\n     * @type {Array<LineString>}\r\n     * @private\r\n     */\r\n    this.meridians_ = [];\r\n\r\n    /**\r\n     * @type {Array<LineString>}\r\n     * @private\r\n     */\r\n    this.parallels_ = [];\r\n\r\n    /**\r\n     * @type {Stroke}\r\n     * @private\r\n     */\r\n    this.strokeStyle_ = options.strokeStyle !== undefined ? options.strokeStyle : DEFAULT_STROKE_STYLE;\r\n\r\n    /**\r\n     * @type {import(\"../proj.js\").TransformFunction|undefined}\r\n     * @private\r\n     */\r\n    this.fromLonLatTransform_ = undefined;\r\n\r\n    /**\r\n     * @type {import(\"../proj.js\").TransformFunction|undefined}\r\n     * @private\r\n     */\r\n    this.toLonLatTransform_ = undefined;\r\n\r\n    /**\r\n     * @type {import(\"../coordinate.js\").Coordinate}\r\n     * @private\r\n     */\r\n    this.projectionCenterLonLat_ = null;\r\n\r\n    /**\r\n     * @type {Array<GraticuleLabelDataType>}\r\n     * @private\r\n     */\r\n    this.meridiansLabels_ = null;\r\n\r\n    /**\r\n     * @type {Array<GraticuleLabelDataType>}\r\n     * @private\r\n     */\r\n    this.parallelsLabels_ = null;\r\n\r\n    if (options.showLabels) {\r\n\r\n      /**\r\n       * @type {null|function(number):string}\r\n       * @private\r\n       */\r\n      this.lonLabelFormatter_ = options.lonLabelFormatter == undefined ?\r\n        degreesToStringHDMS.bind(this, 'EW') : options.lonLabelFormatter;\r\n\r\n      /**\r\n       * @type {function(number):string}\r\n       * @private\r\n       */\r\n      this.latLabelFormatter_ = options.latLabelFormatter == undefined ?\r\n        degreesToStringHDMS.bind(this, 'NS') : options.latLabelFormatter;\r\n\r\n      /**\r\n       * Longitude label position in fractions (0..1) of view extent. 0 means\r\n       * bottom, 1 means top.\r\n       * @type {number}\r\n       * @private\r\n       */\r\n      this.lonLabelPosition_ = options.lonLabelPosition == undefined ? 0 :\r\n        options.lonLabelPosition;\r\n\r\n      /**\r\n       * Latitude Label position in fractions (0..1) of view extent. 0 means left, 1\r\n       * means right.\r\n       * @type {number}\r\n       * @private\r\n       */\r\n      this.latLabelPosition_ = options.latLabelPosition == undefined ? 1 :\r\n        options.latLabelPosition;\r\n\r\n      /**\r\n       * @type {Object.<string,Style>}\r\n       * @private\r\n       */\r\n      this.lonLabelStyleCache_ = {};\r\n\r\n      /**\r\n       * @private\r\n       * @param {import(\"../Feature\").default} feature Feature\r\n       * @return {Style} style\r\n       */\r\n      this.lonLabelStyle_ = function(feature) {\r\n        const label = feature.get('graticule_label');\r\n        if (!this.lonLabelStyleCache_[label]) {\r\n          this.lonLabelStyleCache_[label] = new Style({\r\n            text: options.lonLabelStyle !== undefined ? options.lonLabelStyle :\r\n              new Text({\r\n                text: label,\r\n                font: '12px Calibri,sans-serif',\r\n                textBaseline: 'bottom',\r\n                fill: new Fill({\r\n                  color: 'rgba(0,0,0,1)'\r\n                }),\r\n                stroke: new Stroke({\r\n                  color: 'rgba(255,255,255,1)',\r\n                  width: 3\r\n                })\r\n              })\r\n          });\r\n        }\r\n        return this.lonLabelStyleCache_[label];\r\n      }.bind(this);\r\n\r\n      /**\r\n       * @type {Object.<string,Style>}\r\n       * @private\r\n       */\r\n      this.latLabelStyleCache_ = {};\r\n\r\n      /**\r\n       * @private\r\n       * @param {import(\"../Feature\").default} feature Feature\r\n       * @return {Style} style\r\n       */\r\n      this.latLabelStyle_ = function(feature) {\r\n        const label = feature.get('graticule_label');\r\n        if (!this.latLabelStyleCache_[label]) {\r\n          this.latLabelStyleCache_[label] = new Style({\r\n            text: options.latLabelStyle !== undefined ? options.latLabelStyle :\r\n              new Text({\r\n                text: label,\r\n                font: '12px Calibri,sans-serif',\r\n                textAlign: 'right',\r\n                fill: new Fill({\r\n                  color: 'rgba(0,0,0,1)'\r\n                }),\r\n                stroke: new Stroke({\r\n                  color: 'rgba(255,255,255,1)',\r\n                  width: 3\r\n                })\r\n              })\r\n          });\r\n        }\r\n        return this.latLabelStyleCache_[label];\r\n      }.bind(this);\r\n\r\n      this.meridiansLabels_ = [];\r\n      this.parallelsLabels_ = [];\r\n    }\r\n\r\n    /**\r\n     * @type {Array<number>}\r\n     * @private\r\n     */\r\n    this.intervals_ = options.intervals !== undefined ? options.intervals : INTERVALS;\r\n\r\n    // use a source with a custom loader for lines & text\r\n    this.setSource(\r\n      new VectorSource({\r\n        loader: this.loaderFunction.bind(this),\r\n        strategy: bbox,\r\n        features: new Collection(),\r\n        overlaps: false,\r\n        useSpatialIndex: false,\r\n        wrapX: options.wrapX\r\n      })\r\n    );\r\n\r\n    /**\r\n     * feature pool to use when updating graticule\r\n     * @type {Array<Feature>}\r\n     * @private\r\n     */\r\n    this.featurePool_ = [];\r\n\r\n    /**\r\n     * @type {Style}\r\n     * @private\r\n     */\r\n    this.lineStyle_ = new Style({\r\n      stroke: this.strokeStyle_\r\n    });\r\n\r\n    /**\r\n     * @type {import(\"../extent.js\").Extent}\r\n     */\r\n    this.renderedExtent_ = null;\r\n\r\n    this.setRenderOrder(null);\r\n\r\n    this.renderBuffer_ = 0;\r\n\r\n    this.updateWhileAnimating_ = true;\r\n    this.updateWhileInteracting_ = true;\r\n\r\n    this.tmpExtent_ = null;\r\n  }\r\n\r\n  /**\r\n   * Update geometries in the source based on current view\r\n   * @param {import(\"../extent\").Extent} extent Extent\r\n   * @param {number} resolution Resolution\r\n   * @param {import(\"../proj/Projection.js\").default} projection Projection\r\n   */\r\n  loaderFunction(extent, resolution, projection) {\r\n    const source = /** @type {import(\"../source/Vector.js\").default} */ (this.getSource());\r\n\r\n    // only consider the intersection between our own extent & the requested one\r\n    const layerExtent = this.getExtent() || [-Infinity, -Infinity, Infinity, Infinity];\r\n    const renderExtent = getIntersection(layerExtent, extent, this.tmpExtent_);\r\n\r\n    // we should not keep track of loaded extents\r\n    setTimeout(function() {\r\n      source.removeLoadedExtent(extent);\r\n    }, 0);\r\n\r\n    if (this.renderedExtent_ && equals(this.renderedExtent_, renderExtent)) {\r\n      return;\r\n    }\r\n    this.renderedExtent_ = renderExtent;\r\n\r\n    // bail out if nothing to render\r\n    if (isEmpty(renderExtent)) {\r\n      return;\r\n    }\r\n\r\n    // update projection info\r\n    const center = getCenter(renderExtent);\r\n    const squaredTolerance = resolution * resolution / 4;\r\n\r\n    const updateProjectionInfo = !this.projection_ ||\r\n      !equivalentProjection(this.projection_, projection);\r\n\r\n    if (updateProjectionInfo) {\r\n      this.updateProjectionInfo_(projection);\r\n    }\r\n\r\n    this.createGraticule_(renderExtent, center, resolution, squaredTolerance);\r\n\r\n    // first make sure we have enough features in the pool\r\n    let featureCount = this.meridians_.length + this.parallels_.length;\r\n    if (this.meridiansLabels_) {\r\n      featureCount += this.meridiansLabels_.length;\r\n    }\r\n    if (this.parallelsLabels_) {\r\n      featureCount += this.parallelsLabels_.length;\r\n    }\r\n\r\n    let feature;\r\n    while (featureCount > this.featurePool_.length) {\r\n      feature = new Feature();\r\n      this.featurePool_.push(feature);\r\n    }\r\n\r\n    const featuresColl = source.getFeaturesCollection();\r\n    featuresColl.clear();\r\n    let poolIndex = 0;\r\n\r\n    // add features for the lines & labels\r\n    let i, l;\r\n    for (i = 0, l = this.meridians_.length; i < l; ++i) {\r\n      feature = this.featurePool_[poolIndex++];\r\n      feature.setGeometry(this.meridians_[i]);\r\n      feature.setStyle(this.lineStyle_);\r\n      featuresColl.push(feature);\r\n    }\r\n    for (i = 0, l = this.parallels_.length; i < l; ++i) {\r\n      feature = this.featurePool_[poolIndex++];\r\n      feature.setGeometry(this.parallels_[i]);\r\n      feature.setStyle(this.lineStyle_);\r\n      featuresColl.push(feature);\r\n    }\r\n    let labelData;\r\n    if (this.meridiansLabels_) {\r\n      for (i = 0, l = this.meridiansLabels_.length; i < l; ++i) {\r\n        labelData = this.meridiansLabels_[i];\r\n        feature = this.featurePool_[poolIndex++];\r\n        feature.setGeometry(labelData.geom);\r\n        feature.setStyle(this.lonLabelStyle_);\r\n        feature.set('graticule_label', labelData.text);\r\n        featuresColl.push(feature);\r\n      }\r\n    }\r\n    if (this.parallelsLabels_) {\r\n      for (i = 0, l = this.parallelsLabels_.length; i < l; ++i) {\r\n        labelData = this.parallelsLabels_[i];\r\n        feature = this.featurePool_[poolIndex++];\r\n        feature.setGeometry(labelData.geom);\r\n        feature.setStyle(this.latLabelStyle_);\r\n        feature.set('graticule_label', labelData.text);\r\n        featuresColl.push(feature);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} lon Longitude.\r\n   * @param {number} minLat Minimal latitude.\r\n   * @param {number} maxLat Maximal latitude.\r\n   * @param {number} squaredTolerance Squared tolerance.\r\n   * @param {import(\"../extent.js\").Extent} extent Extent.\r\n   * @param {number} index Index.\r\n   * @return {number} Index.\r\n   * @private\r\n   */\r\n  addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, index) {\r\n    const lineString = this.getMeridian_(lon, minLat, maxLat, squaredTolerance, index);\r\n    if (intersects(lineString.getExtent(), extent)) {\r\n      if (this.meridiansLabels_) {\r\n        const textPoint = this.getMeridianPoint_(lineString, extent, index);\r\n        this.meridiansLabels_[index] = {\r\n          geom: textPoint,\r\n          text: this.lonLabelFormatter_(lon)\r\n        };\r\n      }\r\n      this.meridians_[index++] = lineString;\r\n    }\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * @param {number} lat Latitude.\r\n   * @param {number} minLon Minimal longitude.\r\n   * @param {number} maxLon Maximal longitude.\r\n   * @param {number} squaredTolerance Squared tolerance.\r\n   * @param {import(\"../extent.js\").Extent} extent Extent.\r\n   * @param {number} index Index.\r\n   * @return {number} Index.\r\n   * @private\r\n   */\r\n  addParallel_(lat, minLon, maxLon, squaredTolerance, extent, index) {\r\n    const lineString = this.getParallel_(lat, minLon, maxLon, squaredTolerance, index);\r\n    if (intersects(lineString.getExtent(), extent)) {\r\n      if (this.parallelsLabels_) {\r\n        const textPoint = this.getParallelPoint_(lineString, extent, index);\r\n        this.parallelsLabels_[index] = {\r\n          geom: textPoint,\r\n          text: this.latLabelFormatter_(lat)\r\n        };\r\n      }\r\n      this.parallels_[index++] = lineString;\r\n    }\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * @param {import(\"../extent.js\").Extent} extent Extent.\r\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} squaredTolerance Squared tolerance.\r\n   * @private\r\n   */\r\n  createGraticule_(extent, center, resolution, squaredTolerance) {\r\n    const interval = this.getInterval_(resolution);\r\n    if (interval == -1) {\r\n      this.meridians_.length = this.parallels_.length = 0;\r\n      if (this.meridiansLabels_) {\r\n        this.meridiansLabels_.length = 0;\r\n      }\r\n      if (this.parallelsLabels_) {\r\n        this.parallelsLabels_.length = 0;\r\n      }\r\n      return;\r\n    }\r\n\r\n    const centerLonLat = this.toLonLatTransform_(center);\r\n    let centerLon = centerLonLat[0];\r\n    let centerLat = centerLonLat[1];\r\n    const maxLines = this.maxLines_;\r\n    let cnt, idx, lat, lon;\r\n\r\n    let validExtent = [\r\n      Math.max(extent[0], this.minLonP_),\r\n      Math.max(extent[1], this.minLatP_),\r\n      Math.min(extent[2], this.maxLonP_),\r\n      Math.min(extent[3], this.maxLatP_)\r\n    ];\r\n\r\n    validExtent = transformExtent(validExtent, this.projection_, 'EPSG:4326');\r\n    const maxLat = validExtent[3];\r\n    const maxLon = validExtent[2];\r\n    const minLat = validExtent[1];\r\n    const minLon = validExtent[0];\r\n\r\n    // Create meridians\r\n\r\n    centerLon = Math.floor(centerLon / interval) * interval;\r\n    lon = clamp(centerLon, this.minLon_, this.maxLon_);\r\n\r\n    idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, 0);\r\n\r\n    cnt = 0;\r\n    while (lon != this.minLon_ && cnt++ < maxLines) {\r\n      lon = Math.max(lon - interval, this.minLon_);\r\n      idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\r\n    }\r\n\r\n    lon = clamp(centerLon, this.minLon_, this.maxLon_);\r\n\r\n    cnt = 0;\r\n    while (lon != this.maxLon_ && cnt++ < maxLines) {\r\n      lon = Math.min(lon + interval, this.maxLon_);\r\n      idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\r\n    }\r\n\r\n    this.meridians_.length = idx;\r\n    if (this.meridiansLabels_) {\r\n      this.meridiansLabels_.length = idx;\r\n    }\r\n\r\n    // Create parallels\r\n\r\n    centerLat = Math.floor(centerLat / interval) * interval;\r\n    lat = clamp(centerLat, this.minLat_, this.maxLat_);\r\n\r\n    idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, 0);\r\n\r\n    cnt = 0;\r\n    while (lat != this.minLat_ && cnt++ < maxLines) {\r\n      lat = Math.max(lat - interval, this.minLat_);\r\n      idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\r\n    }\r\n\r\n    lat = clamp(centerLat, this.minLat_, this.maxLat_);\r\n\r\n    cnt = 0;\r\n    while (lat != this.maxLat_ && cnt++ < maxLines) {\r\n      lat = Math.min(lat + interval, this.maxLat_);\r\n      idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\r\n    }\r\n\r\n    this.parallels_.length = idx;\r\n    if (this.parallelsLabels_) {\r\n      this.parallelsLabels_.length = idx;\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @param {number} resolution Resolution.\r\n   * @return {number} The interval in degrees.\r\n   * @private\r\n   */\r\n  getInterval_(resolution) {\r\n    const centerLon = this.projectionCenterLonLat_[0];\r\n    const centerLat = this.projectionCenterLonLat_[1];\r\n    let interval = -1;\r\n    const target = Math.pow(this.targetSize_ * resolution, 2);\r\n    /** @type {Array<number>} **/\r\n    const p1 = [];\r\n    /** @type {Array<number>} **/\r\n    const p2 = [];\r\n    for (let i = 0, ii = this.intervals_.length; i < ii; ++i) {\r\n      const delta = this.intervals_[i] / 2;\r\n      p1[0] = centerLon - delta;\r\n      p1[1] = centerLat - delta;\r\n      p2[0] = centerLon + delta;\r\n      p2[1] = centerLat + delta;\r\n      this.fromLonLatTransform_(p1, p1);\r\n      this.fromLonLatTransform_(p2, p2);\r\n      const dist = Math.pow(p2[0] - p1[0], 2) + Math.pow(p2[1] - p1[1], 2);\r\n      if (dist <= target) {\r\n        break;\r\n      }\r\n      interval = this.intervals_[i];\r\n    }\r\n    return interval;\r\n  }\r\n\r\n  /**\r\n   * @param {number} lon Longitude.\r\n   * @param {number} minLat Minimal latitude.\r\n   * @param {number} maxLat Maximal latitude.\r\n   * @param {number} squaredTolerance Squared tolerance.\r\n   * @return {LineString} The meridian line string.\r\n   * @param {number} index Index.\r\n   * @private\r\n   */\r\n  getMeridian_(lon, minLat, maxLat, squaredTolerance, index) {\r\n    const flatCoordinates = meridian(lon, minLat, maxLat, this.projection_, squaredTolerance);\r\n    let lineString = this.meridians_[index];\r\n    if (!lineString) {\r\n      lineString = this.meridians_[index] = new LineString(flatCoordinates, GeometryLayout.XY);\r\n    } else {\r\n      lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\r\n      lineString.changed();\r\n    }\r\n    return lineString;\r\n  }\r\n\r\n  /**\r\n   * @param {LineString} lineString Meridian\r\n   * @param {import(\"../extent.js\").Extent} extent Extent.\r\n   * @param {number} index Index.\r\n   * @return {Point} Meridian point.\r\n   * @private\r\n   */\r\n  getMeridianPoint_(lineString, extent, index) {\r\n    const flatCoordinates = lineString.getFlatCoordinates();\r\n    const clampedBottom = Math.max(extent[1], flatCoordinates[1]);\r\n    const clampedTop = Math.min(extent[3], flatCoordinates[flatCoordinates.length - 1]);\r\n    const lat = clamp(\r\n      extent[1] + Math.abs(extent[1] - extent[3]) * this.lonLabelPosition_,\r\n      clampedBottom, clampedTop);\r\n    const coordinate = [flatCoordinates[0], lat];\r\n    let point;\r\n    if (index in this.meridiansLabels_) {\r\n      point = this.meridiansLabels_[index].geom;\r\n      point.setCoordinates(coordinate);\r\n    } else {\r\n      point = new Point(coordinate);\r\n    }\r\n    return point;\r\n  }\r\n\r\n  /**\r\n   * Get the list of meridians.  Meridians are lines of equal longitude.\r\n   * @return {Array<LineString>} The meridians.\r\n   * @api\r\n   */\r\n  getMeridians() {\r\n    return this.meridians_;\r\n  }\r\n\r\n  /**\r\n   * @param {number} lat Latitude.\r\n   * @param {number} minLon Minimal longitude.\r\n   * @param {number} maxLon Maximal longitude.\r\n   * @param {number} squaredTolerance Squared tolerance.\r\n   * @return {LineString} The parallel line string.\r\n   * @param {number} index Index.\r\n   * @private\r\n   */\r\n  getParallel_(lat, minLon, maxLon, squaredTolerance, index) {\r\n    const flatCoordinates = parallel(lat, minLon, maxLon, this.projection_, squaredTolerance);\r\n    let lineString = this.parallels_[index];\r\n    if (!lineString) {\r\n      lineString = new LineString(flatCoordinates, GeometryLayout.XY);\r\n    } else {\r\n      lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\r\n      lineString.changed();\r\n    }\r\n    return lineString;\r\n  }\r\n\r\n\r\n  /**\r\n   * @param {LineString} lineString Parallels.\r\n   * @param {import(\"../extent.js\").Extent} extent Extent.\r\n   * @param {number} index Index.\r\n   * @return {Point} Parallel point.\r\n   * @private\r\n   */\r\n  getParallelPoint_(lineString, extent, index) {\r\n    const flatCoordinates = lineString.getFlatCoordinates();\r\n    const clampedLeft = Math.max(extent[0], flatCoordinates[0]);\r\n    const clampedRight = Math.min(extent[2], flatCoordinates[flatCoordinates.length - 2]);\r\n    const lon = clamp(\r\n      extent[0] + Math.abs(extent[0] - extent[2]) * this.latLabelPosition_,\r\n      clampedLeft, clampedRight);\r\n    const coordinate = [lon, flatCoordinates[1]];\r\n    let point;\r\n    if (index in this.parallelsLabels_) {\r\n      point = this.parallelsLabels_[index].geom;\r\n      point.setCoordinates(coordinate);\r\n    } else {\r\n      point = new Point(coordinate);\r\n    }\r\n    return point;\r\n  }\r\n\r\n  /**\r\n   * Get the list of parallels.  Parallels are lines of equal latitude.\r\n   * @return {Array<LineString>} The parallels.\r\n   * @api\r\n   */\r\n  getParallels() {\r\n    return this.parallels_;\r\n  }\r\n\r\n  /**\r\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\r\n   * @private\r\n   */\r\n  updateProjectionInfo_(projection) {\r\n    const epsg4326Projection = getProjection('EPSG:4326');\r\n\r\n    const worldExtent = projection.getWorldExtent();\r\n    const worldExtentP = transformExtent(worldExtent, epsg4326Projection, projection);\r\n\r\n    this.maxLat_ = worldExtent[3];\r\n    this.maxLon_ = worldExtent[2];\r\n    this.minLat_ = worldExtent[1];\r\n    this.minLon_ = worldExtent[0];\r\n\r\n    this.maxLatP_ = worldExtentP[3];\r\n    this.maxLonP_ = worldExtentP[2];\r\n    this.minLatP_ = worldExtentP[1];\r\n    this.minLonP_ = worldExtentP[0];\r\n\r\n    this.fromLonLatTransform_ = getTransform(epsg4326Projection, projection);\r\n\r\n    this.toLonLatTransform_ = getTransform(projection, epsg4326Projection);\r\n\r\n    this.projectionCenterLonLat_ = this.toLonLatTransform_(getCenter(projection.getExtent()));\r\n\r\n    this.projection_ = projection;\r\n  }\r\n}\r\n\r\n\r\nexport default Graticule;\r\n"],"names":["const","super","let"],"mappings":"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"}